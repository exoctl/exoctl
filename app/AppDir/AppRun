#!/bin/bash

if [ -n "$APPIMAGE_EXTRACT_RUNNING" ]; then
    exit 0
fi

export APPDIR_LUA_PATH="$APPDIR/?.lua;"
export APPDIR_LUA_CPATH="$APPDIR/?.so;"
export INFNITYDIR_LUA_PATH="$PWD/$INFINITYDIR/?.lua;"
export INFNITYDIR_LUA_CPATH="$PWD/$INFINITYDIR/?.so;"

export LUA_PATH="$APPDIR_LUA_PATH;$INFNITYDIR_LUA_PATH;$LUA_PATH"
export LUA_CPATH="$APPDIR_LUA_CPATH;$INFNITYDIR_LUA_CPATH;$LUA_CPATH"

export INFINITYDIR=$PWD/$INFINITYDIR
cd $INFINITYDIR

exec "lua5.4"  "$APPDIR/App.lua" "$@"